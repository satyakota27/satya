<li class="py-2">
  <div class="flex items-center justify-between hover:bg-gray-50 p-2 rounded" style="padding-left: <%= level * 24 + 8 %>px;">
    <div class="flex items-center flex-1">
      <div class="flex-shrink-0 w-6">
        <% if location.children.any? %>
          <span class="text-gray-400">▼</span>
        <% else %>
          <span class="text-gray-300">•</span>
        <% end %>
      </div>
      <div class="ml-2 flex-1">
        <div class="flex items-center">
          <span class="text-sm font-medium text-gray-900"><%= location.name %></span>
          <span class="ml-2 text-xs text-gray-500 font-mono">(<%= location.location_code %>)</span>
          <span class="ml-2 text-xs text-gray-400"><%= location.warehouse_location_type.name %></span>
        </div>
        <div class="text-xs text-gray-500 mt-1">
          Path: <span class="font-mono"><%= location.full_path %></span>
          <% if location.inventory_items.any? %>
            <span class="ml-2 text-indigo-600">• <%= location.inventory_items.sum(:quantity) %> items</span>
          <% end %>
        </div>
      </div>
    </div>
    <div class="flex items-center space-x-2">
      <%= link_to location, class: "text-xs text-indigo-600 hover:text-indigo-900" do %>
        View
      <% end %>
      <% if can? :update, location %>
        <%= link_to edit_warehouse_location_path(location), class: "text-xs text-yellow-600 hover:text-yellow-900" do %>
          Edit
        <% end %>
      <% end %>
      <% if can? :create, WarehouseLocation %>
        <button type="button" class="add-child-btn text-xs text-gray-600 hover:text-gray-900" data-parent-id="<%= location.id %>" data-parent-name="<%= location.name %>">
          Add Child
        </button>
      <% end %>
    </div>
  </div>
  
  <%# Inline form for adding child - hidden by default %>
  <div id="child-form-<%= location.id %>" class="child-form-container hidden" style="padding-left: <%= (level + 1) * 24 + 8 %>px; margin-top: 8px;">
    <%= render 'warehouse_locations/inline_form', parent_location: location, level: level + 1 %>
  </div>
  
  <% if location.children.any? %>
    <ul class="ml-4">
      <% location.children.active.each do |child| %>
        <%= render 'tree_node', location: child, level: level + 1 %>
      <% end %>
    </ul>
  <% end %>
</li>

